<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BitMagic-C++: svsample06.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BitMagic-C++
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">svsample06.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>Search/scan for elements in unordered, non-unique sparse vector</p><dl class="section see"><dt>See also</dt><dd><a class="el" href="classbm_1_1sparse__vector.html#a73134a0c2f6d595d3cf165236622f5da">bm::sparse_vector&lt;&gt;::const_iterator</a> </dd>
<dd>
<a class="el" href="classbm_1_1sparse__vector.html#a7362aaf921cee882e08cb349677d51de">bm::sparse_vector&lt;&gt;::back_insert_iterator</a> </dd>
<dd>
<a class="el" href="classbm_1_1sparse__vector__scanner.html" title="algorithms for sparse_vector scan/seach ">bm::sparse_vector_scanner</a></dd></dl>
<div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">Copyright(c) 2002-2017 Anatoliy Kuznetsov(anatoliy_kuznetsov at yahoo.com)</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div><div class="line"><span class="comment">you may not use this file except in compliance with the License.</span></div><div class="line"><span class="comment">You may obtain a copy of the License at</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">Unless required by applicable law or agreed to in writing, software</span></div><div class="line"><span class="comment">distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div><div class="line"><span class="comment">WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div><div class="line"><span class="comment">See the License for the specific language governing permissions and</span></div><div class="line"><span class="comment">limitations under the License.</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">For more information please visit:  http://bitmagic.io</span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">/** \example svsample06.cpp</span></div><div class="line"><span class="comment">   Search/scan for elements in unordered, non-unique sparse vector</span></div><div class="line"><span class="comment"> </span></div><div class="line"><span class="comment">  \sa bm::sparse_vector&lt;&gt;::const_iterator</span></div><div class="line"><span class="comment">  \sa bm::sparse_vector&lt;&gt;::back_insert_iterator</span></div><div class="line"><span class="comment">  \sa bm::sparse_vector_scanner</span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">/*! \file svsample06.cpp</span></div><div class="line"><span class="comment">    \brief Example: sparse_vector&lt;&gt; scan search (non-ordered set functionality)</span></div><div class="line"><span class="comment">*/</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;random&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;stdexcept&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="bmsparsevec_8h.html">bmsparsevec.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="bmsparsevec__algo_8h.html">bmsparsevec_algo.h</a>&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="bmtimer_8h.html">bmtimer.h</a>&quot;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacestd.html">std</a>;</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> <a name="_a0"></a><a class="code" href="classbm_1_1sparse__vector.html">bm::sparse_vector&lt;bm::id_t, bm::bvector&lt;&gt;</a> &gt; <a name="a1"></a><a class="code" href="svsample06_8cpp.html#a6285ce7ea16491e7b6e34d7007385b38">sparse_vector_u32</a>;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// ----------------------------------------------------</span></div><div class="line"><span class="comment">// Global parameters and types</span></div><div class="line"><span class="comment">// ----------------------------------------------------</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">unsigned</span>  <a name="a2"></a><a class="code" href="svsample06_8cpp.html#ace201b00999e65c2609354bcc2834f10">value_max</a> = 1250000;    <span class="comment">// range of variants of events [0..max]</span></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">unsigned</span>  <a name="a3"></a><a class="code" href="svsample06_8cpp.html#a006d7ce7dc31baa25671d1d264dd0c64">test_size</a> = 250000000;  <span class="comment">// vector size to generate</span></div><div class="line"></div><div class="line"><span class="comment">// -------------------------------------------</span></div><div class="line"><span class="comment">// Random generator</span></div><div class="line"><span class="comment">// -------------------------------------------</span></div><div class="line"></div><div class="line">std::random_device <a name="a4"></a><a class="code" href="svsample06_8cpp.html#a4d7cf7e96896f9aebdd79fed7c8bab7b">rand_dev</a>;</div><div class="line">std::mt19937 <a name="a5"></a><a class="code" href="svsample06_8cpp.html#a9b287f91e2adf83c3131895cd6e07195">gen</a>(<a class="code" href="svsample06_8cpp.html#a4d7cf7e96896f9aebdd79fed7c8bab7b">rand_dev</a>());</div><div class="line">std::uniform_int_distribution&lt;&gt; <a name="a6"></a><a class="code" href="svsample06_8cpp.html#ae2805bdcfb8ec09e8f1b9d436927f498">rand_dis</a>(1, <a class="code" href="svsample06_8cpp.html#ace201b00999e65c2609354bcc2834f10">value_max</a>); <span class="comment">// generate uniform numebrs for [1, vector_max]</span></div><div class="line"></div><div class="line"><span class="comment">// timing storage for benchmarking</span></div><div class="line"><a class="code" href="classbm_1_1chrono__taker.html#add1676592117ed0eaa2fa6279a71b46a">bm::chrono_taker::duration_map_type</a>  <a name="a7"></a><a class="code" href="svsample06_8cpp.html#a6cb51d150528a5d2d87acb3e88f450bc">timing_map</a>;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// Function to generate test vector set with some NULL values stored as a</span></div><div class="line"><span class="comment">// separate bit-bector</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="keyword">static</span></div><div class="line"><span class="keywordtype">void</span> <a name="a8"></a><a class="code" href="svsample06_8cpp.html#ae70384c7090bbcf1bbf7c7ec3541f962">generate_test_set</a>(std::vector&lt;unsigned&gt;&amp; vect,</div><div class="line">                        <a name="_a9"></a><a class="code" href="classbm_1_1bvector.html">bm::bvector&lt;&gt;</a>&amp;         bv_null,</div><div class="line">                        <a name="_a10"></a><a class="code" href="classbm_1_1sparse__vector.html">sparse_vector_u32</a>&amp;     sv)</div><div class="line">{</div><div class="line">    <span class="comment">// back insert iterator is faster than random element access for sparse vector</span></div><div class="line">    <span class="comment">//</span></div><div class="line">    <a name="a11"></a><a class="code" href="classbm_1_1sparse__vector.html#a7362aaf921cee882e08cb349677d51de">sparse_vector_u32::back_insert_iterator</a> bi(sv.<a name="a12"></a><a class="code" href="classbm_1_1sparse__vector.html#a664bc1422f5a71c93c09d809b3d1ec3f">get_back_inserter</a>());</div><div class="line"></div><div class="line">    vect.resize(<a class="code" href="svsample06_8cpp.html#a006d7ce7dc31baa25671d1d264dd0c64">test_size</a>);</div><div class="line">    bv_null.<a name="a13"></a><a class="code" href="classbm_1_1bvector.html#ac1280ff08a2b1f4377ca15df081781f8">reset</a>();</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; <a class="code" href="svsample06_8cpp.html#a006d7ce7dc31baa25671d1d264dd0c64">test_size</a>; ++i)</div><div class="line">    {</div><div class="line">        <span class="keywordtype">unsigned</span> v = unsigned(<a class="code" href="svsample06_8cpp.html#ae2805bdcfb8ec09e8f1b9d436927f498">rand_dis</a>(<a class="code" href="svsample06_8cpp.html#a9b287f91e2adf83c3131895cd6e07195">gen</a>));</div><div class="line"></div><div class="line">        vect[i] = v;</div><div class="line">        bv_null[i] = <span class="keyword">true</span>; <span class="comment">// not NULL(assigned) element</span></div><div class="line"></div><div class="line">        *bi = v; <span class="comment">// push back an element to sparse vector</span></div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (i % 64 == 0)</div><div class="line">        {</div><div class="line">            bi.add_null(5);  <span class="comment">// add 5 unassigned elements using back inserter</span></div><div class="line">            i += 5;  <span class="comment">// insert a small NULL plate (unassigned values)</span></div><div class="line">        }</div><div class="line">    } <span class="comment">// for</span></div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// plain scan in std::vector&lt;&gt;, matching values are indexed </span></div><div class="line"><span class="comment">// in result bit-vector (subset projection)</span></div><div class="line"><span class="comment">// values are added, so multiple calls result in subset addition</span></div><div class="line"><span class="keyword">static</span></div><div class="line"><span class="keywordtype">void</span> <a name="a14"></a><a class="code" href="svsample06_8cpp.html#a6375dd981ff2723f73dc255db6e6ba55">vector_search</a>(<span class="keyword">const</span> std::vector&lt;unsigned&gt;&amp; vect,</div><div class="line">                   <span class="keyword">const</span> <a class="code" href="classbm_1_1bvector.html">bm::bvector&lt;&gt;</a>&amp;         bv_null,</div><div class="line">                   <span class="keywordtype">unsigned</span>                     value,</div><div class="line">                   <a class="code" href="classbm_1_1bvector.html">bm::bvector&lt;&gt;</a>&amp;               bv_res)</div><div class="line">{</div><div class="line">    bv_res.<a name="a15"></a><a class="code" href="classbm_1_1bvector.html#aaceb8d31d9da05f977de5c6a6cd62e24">init</a>(); <span class="comment">// always use init() if set_bit_no_check()</span></div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; vect.size(); ++i)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (vect[i] == value)</div><div class="line">            bv_res.<a name="a16"></a><a class="code" href="classbm_1_1bvector.html#a269707ecb4a5cba0d1907f85c0742f33">set_bit_no_check</a>((<a class="code" href="namespacebm.html#aa3824d882a037396370b16f2f0a8bf37">bm::id_t</a>)i);</div><div class="line">    } <span class="comment">// for</span></div><div class="line">    bv_res &amp;= bv_null; <span class="comment">// correct results to only include non-NULL values</span></div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">inline</span></div><div class="line"><span class="keywordtype">void</span> <a name="a17"></a><a class="code" href="svsample06_8cpp.html#a9682c30f1b194905b7c04449fdcda1e2">print_bvector</a>(<span class="keyword">const</span> <a class="code" href="classbm_1_1bvector.html">bm::bvector&lt;&gt;</a>&amp; bv)</div><div class="line">{</div><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;( count = &quot;</span> &lt;&lt; bv.<a name="a18"></a><a class="code" href="classbm_1_1bvector.html#ad012390ff13532528a8e25bf433de544">count</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; <span class="stringliteral">&quot;: [&quot;</span>;</div><div class="line">    </div><div class="line">    <a name="_a19"></a><a class="code" href="classbm_1_1bvector_1_1enumerator.html">bm::bvector&lt;&gt;::enumerator</a> en = bv.<a name="a20"></a><a class="code" href="classbm_1_1bvector.html#a86b939f3aed555dc073e8c26e9efea71">first</a>();</div><div class="line">    <span class="keywordflow">for</span> (; en.<a name="a21"></a><a class="code" href="classbm_1_1bvector_1_1iterator__base.html#a10f662a5764d2bcf6a158fb3521401a9">valid</a>(); ++en)</div><div class="line">        cout &lt;&lt; *en &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div><div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;]&quot;</span> &lt;&lt; endl;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a name="a22"></a><a class="code" href="svsample06_8cpp.html#a840291bc02cba5474a4cb46a9b9566fe">main</a>(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">    <span class="keywordflow">try</span></div><div class="line">    {</div><div class="line">        <span class="comment">// First, lets run, simple (printable) search case</span></div><div class="line">        <span class="comment">//</span></div><div class="line">        {</div><div class="line">            <a class="code" href="classbm_1_1sparse__vector.html">sparse_vector_u32</a> sv(<a name="a23"></a><a class="code" href="group__bvector.html#ggab0835910831729c806840cd5c8f40b2ba095db184b37a1341cbbbf813a70aed79">bm::use_null</a>);</div><div class="line">            </div><div class="line">            sv.<a name="a24"></a><a class="code" href="classbm_1_1sparse__vector.html#a56101ce9a559b30f8e14153133063ca7">set</a>(2, 25);</div><div class="line">            sv.<a class="code" href="classbm_1_1sparse__vector.html#a56101ce9a559b30f8e14153133063ca7">set</a>(3, 35);</div><div class="line">            sv.<a class="code" href="classbm_1_1sparse__vector.html#a56101ce9a559b30f8e14153133063ca7">set</a>(7, 75);</div><div class="line">            sv.<a class="code" href="classbm_1_1sparse__vector.html#a56101ce9a559b30f8e14153133063ca7">set</a>(1000, 2000);</div><div class="line">            sv.<a class="code" href="classbm_1_1sparse__vector.html#a56101ce9a559b30f8e14153133063ca7">set</a>(256, 2001);</div><div class="line">            sv.<a class="code" href="classbm_1_1sparse__vector.html#a56101ce9a559b30f8e14153133063ca7">set</a>(77, 25);</div><div class="line"></div><div class="line">            <a class="code" href="classbm_1_1bvector.html">bm::bvector&lt;&gt;</a> bv_found;  <span class="comment">// search results vector</span></div><div class="line">            </div><div class="line">            <a name="_a25"></a><a class="code" href="classbm_1_1sparse__vector__scanner.html">bm::sparse_vector_scanner&lt;sparse_vector_u32&gt;</a> scanner; <span class="comment">// scanner class</span></div><div class="line">            scanner.<a name="a26"></a><a class="code" href="classbm_1_1sparse__vector__scanner.html#aa2439360def2f3fe3c788872c0e70997">find_eq</a>(sv, 25, bv_found); <span class="comment">// seach for all values == 25</span></div><div class="line">            </div><div class="line">            <a class="code" href="svsample06_8cpp.html#a9682c30f1b194905b7c04449fdcda1e2">print_bvector</a>(bv_found); <span class="comment">// print results </span></div><div class="line"></div><div class="line">            scanner.<a name="a27"></a><a class="code" href="classbm_1_1sparse__vector__scanner.html#a803ff666c047dae732836e959339d89c">invert</a>(sv, bv_found); <span class="comment">// invert search results to NOT EQ</span></div><div class="line">            <a class="code" href="svsample06_8cpp.html#a9682c30f1b194905b7c04449fdcda1e2">print_bvector</a>(bv_found);  <span class="comment">// print all != 25</span></div><div class="line">        }</div><div class="line"></div><div class="line">        </div><div class="line">        std::vector&lt;unsigned&gt; vect;</div><div class="line">        <a class="code" href="classbm_1_1bvector.html">bm::bvector&lt;&gt;</a> bv_null;</div><div class="line">        <a class="code" href="classbm_1_1sparse__vector.html">sparse_vector_u32</a> sv(<a class="code" href="group__bvector.html#ggab0835910831729c806840cd5c8f40b2ba095db184b37a1341cbbbf813a70aed79">bm::use_null</a>);</div><div class="line"></div><div class="line">        {</div><div class="line">            <a name="_a28"></a><a class="code" href="classbm_1_1chrono__taker.html">bm::chrono_taker</a> tt1(<span class="stringliteral">&quot;0. test set generate &quot;</span>, 1, &amp;timing_map);</div><div class="line">            <a class="code" href="svsample06_8cpp.html#ae70384c7090bbcf1bbf7c7ec3541f962">generate_test_set</a>(vect, bv_null, sv);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordtype">unsigned</span> search_repeats = 500;</div><div class="line"></div><div class="line">        <span class="comment">// generate a search vector for benchmarking</span></div><div class="line">        <span class="comment">//</span></div><div class="line">        std::vector&lt;unsigned&gt; search_vect;</div><div class="line">        {</div><div class="line">            <a class="code" href="classbm_1_1bvector.html">bm::bvector&lt;&gt;</a> bv_tmp;</div><div class="line">            search_vect.reserve(search_repeats);</div><div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; search_repeats;)</div><div class="line">            {</div><div class="line">                <a class="code" href="namespacebm.html#aa3824d882a037396370b16f2f0a8bf37">bm::id_t</a> idx = <a name="a29"></a><a class="code" href="namespacebm.html#aa3824d882a037396370b16f2f0a8bf37">bm::id_t</a>(<a class="code" href="svsample06_8cpp.html#ae2805bdcfb8ec09e8f1b9d436927f498">rand_dis</a>(<a class="code" href="svsample06_8cpp.html#a9b287f91e2adf83c3131895cd6e07195">gen</a>));</div><div class="line">                <span class="keywordflow">if</span> (!bv_tmp.<a name="a30"></a><a class="code" href="classbm_1_1bvector.html#abf474232920c5a01c88db1f85608b79b">test</a>(idx)) <span class="comment">// check if number is unique</span></div><div class="line">                {</div><div class="line">                    search_vect.push_back(idx);</div><div class="line">                    bv_tmp[idx] = 1;</div><div class="line">                    ++i;</div><div class="line">                }</div><div class="line">            }</div><div class="line">        }</div><div class="line">        </div><div class="line">        <span class="comment">// run benchmarks</span></div><div class="line">        <span class="comment">//</span></div><div class="line">        <a class="code" href="classbm_1_1bvector.html">bm::bvector&lt;&gt;</a> bv_res1;</div><div class="line">        <a class="code" href="classbm_1_1bvector.html">bm::bvector&lt;&gt;</a> bv_res2;</div><div class="line">        <a class="code" href="classbm_1_1bvector.html">bm::bvector&lt;&gt;</a> bv_res3;</div><div class="line"></div><div class="line">        {</div><div class="line">            <a class="code" href="classbm_1_1chrono__taker.html">bm::chrono_taker</a> tt1(<span class="stringliteral">&quot;1. std::vector&lt;&gt; scan &quot;</span>, search_repeats, &amp;timing_map);</div><div class="line">            </div><div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; search_repeats; ++i)</div><div class="line">            {</div><div class="line">                <span class="keywordtype">unsigned</span> vs = search_vect[i];</div><div class="line">                <a class="code" href="svsample06_8cpp.html#a6375dd981ff2723f73dc255db6e6ba55">vector_search</a>(vect, bv_null, vs, bv_res1);</div><div class="line">            } <span class="comment">// for</span></div><div class="line">        }</div><div class="line"></div><div class="line">        {</div><div class="line">            <a class="code" href="classbm_1_1chrono__taker.html">bm::chrono_taker</a> tt1(<span class="stringliteral">&quot;2. sparse_vector&lt;&gt; scan &quot;</span>, search_repeats, &amp;timing_map);</div><div class="line"></div><div class="line">            <a class="code" href="classbm_1_1sparse__vector__scanner.html">bm::sparse_vector_scanner&lt;sparse_vector_u32&gt;</a> scanner;</div><div class="line">            scanner.<a class="code" href="classbm_1_1sparse__vector__scanner.html#aa2439360def2f3fe3c788872c0e70997">find_eq</a>(sv, search_vect.<a name="a31"></a><a class="code" href="classbm_1_1sparse__vector.html#a9737e33876199fae44ae8a79cd8bcb49">begin</a>(), search_vect.end(), bv_res2);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// check jus in case if results look correct</span></div><div class="line">        <span class="keywordflow">if</span> (bv_res1.<a name="a32"></a><a class="code" href="classbm_1_1bvector.html#a38404509c80ec69e1075092f436a958e">compare</a>(bv_res2) != 0)</div><div class="line">        {</div><div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;2. Search result mismatch!&quot;</span> &lt;&lt; std::endl;</div><div class="line">        }</div><div class="line"></div><div class="line">        {</div><div class="line">            bv_res3.<a class="code" href="classbm_1_1bvector.html#aaceb8d31d9da05f977de5c6a6cd62e24">init</a>(); <span class="comment">// always init before calling &quot;set_bit_no_check()&quot;</span></div><div class="line">            </div><div class="line">            <a class="code" href="classbm_1_1chrono__taker.html">bm::chrono_taker</a> tt1(<span class="stringliteral">&quot;3. sparse_vector&lt;&gt;::const_iterator search &quot;</span>, search_repeats, &amp;timing_map);</div><div class="line"></div><div class="line">            <span class="comment">// prepare a unique search set</span></div><div class="line">            <a class="code" href="classbm_1_1bvector.html">bm::bvector&lt;&gt;</a> bv_search(<a name="a33"></a><a class="code" href="group__bvector.html#ggad0b87b3b7292383a864d27feaf1c9effa7fe09d1d7c62a813db922c396c0cbc9c">bm::BM_GAP</a>);</div><div class="line">            <a name="a34"></a><a class="code" href="group__setalgo.html#gab15f2180dfd9a8bcb0d261689336d786">bm::combine_or</a>(bv_search, search_vect.begin(), search_vect.end());</div><div class="line"></div><div class="line">            <a name="a35"></a><a class="code" href="classbm_1_1sparse__vector.html#a73134a0c2f6d595d3cf165236622f5da">sparse_vector_u32::const_iterator</a> it = sv.<a class="code" href="classbm_1_1sparse__vector.html#a9737e33876199fae44ae8a79cd8bcb49">begin</a>();</div><div class="line">            <a class="code" href="classbm_1_1sparse__vector.html#a73134a0c2f6d595d3cf165236622f5da">sparse_vector_u32::const_iterator</a> it_end = sv.<a name="a36"></a><a class="code" href="classbm_1_1sparse__vector.html#a4a723660204c8f9bc3ed5fb5b50cacb4">end</a>();</div><div class="line">            <span class="keywordflow">for</span> (; it != it_end; ++it)</div><div class="line">            {</div><div class="line">                <span class="keywordtype">unsigned</span> v = *it;</div><div class="line">                <span class="keywordflow">if</span> (bv_search.test(v))</div><div class="line">                {</div><div class="line">                    bv_res3.<a class="code" href="classbm_1_1bvector.html#a269707ecb4a5cba0d1907f85c0742f33">set_bit_no_check</a>(it.pos());</div><div class="line">                }</div><div class="line">            } <span class="comment">// for</span></div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// paranoiya check</span></div><div class="line">        <span class="keywordflow">if</span> (bv_res1.<a class="code" href="classbm_1_1bvector.html#a38404509c80ec69e1075092f436a958e">compare</a>(bv_res3) != 0)</div><div class="line">        {</div><div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;3. Search result mismatch!&quot;</span> &lt;&lt; std::endl;</div><div class="line">        }</div><div class="line"></div><div class="line">        </div><div class="line">        <a name="a37"></a><a class="code" href="classbm_1_1chrono__taker.html#a30b45453d952d14afe56c29087970899">bm::chrono_taker::print_duration_map</a>(timing_map, <a name="a38"></a><a class="code" href="classbm_1_1chrono__taker.html#a9a41e5f2fe48ba472fd77a1dbd86457dad530ca7863ce7e60f4fa221e1dfa64a2">bm::chrono_taker::ct_ops_per_sec</a>);</div><div class="line"></div><div class="line">    }</div><div class="line">    <span class="keywordflow">catch</span>(std::exception&amp; ex)</div><div class="line">    {</div><div class="line">        std::cerr &lt;&lt; ex.what() &lt;&lt; std::endl;</div><div class="line">        <span class="keywordflow">return</span> 1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div></div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
